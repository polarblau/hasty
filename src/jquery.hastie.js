// Generated by CoffeeScript 1.3.1
(function() {
  var $;

  $ = jQuery;

  $.fn.hastie = function(options) {
    var defaultTemplate, render, settings;
    settings = $.extend({
      commentsTemplate: 'foo',
      commentTemplate: 'bar'
    });
    defaultTemplate = "<ul>\n  {{#comments}}\n    <li>{{body}}</li>\n  {{/comments}}\n</ul>";
    render = function(comments, $container) {
      var output;
      output = Mustache.render(defaultTemplate, {
        comments: comments
      });
      return $container.html(comments);
    };
    return this.each(function() {
      var $this, url,
        _this = this;
      $this = $(this);
      url = $this.data('comments-url');
      return $.ajax({
        url: url,
        success: function(comments) {
          return render(comments.data, $this);
        },
        dataType: 'jsonp'
      });
    });
  };

}).call(this);
